[gd_scene load_steps=16 format=3 uid="uid://drhx74i8jnvka"]

[ext_resource type="Script" path="res://addons/godotvmf/utils/VMFNode.gd" id="1_lhojc"]
[ext_resource type="ArrayMesh" uid="uid://3v01xdnt357i" path="res://geometry/example2_vmf_import.mesh" id="2_6dllp"]
[ext_resource type="Shape3D" uid="uid://bs0u3uihq2wgw" path="res://geometry/example2_vmf_collision_import.res" id="3_xftf7"]
[ext_resource type="PackedScene" uid="uid://beponjehvu4od" path="res://entities/info_player_start.tscn" id="4_coq5b"]
[ext_resource type="PackedScene" uid="uid://bm8k8ppws8jtv" path="res://entities/light.tscn" id="4_ouwts"]
[ext_resource type="Script" path="res://entities/info_player_start.gd" id="5_rebl7"]
[ext_resource type="Script" path="res://entities/light.gd" id="7_2d5ug"]
[ext_resource type="PackedScene" uid="uid://dqohp4r0iukoo" path="res://entities/light_spot.tscn" id="8_tapr5"]
[ext_resource type="Script" path="res://entities/light_spot.gd" id="9_uchp1"]
[ext_resource type="PackedScene" uid="uid://bxwdmqt2mtc15" path="res://entities/func_door.tscn" id="10_tfddm"]
[ext_resource type="Script" path="res://entities/func_door.gd" id="11_77vlf"]
[ext_resource type="PackedScene" uid="uid://dw3wc4ii6tuan" path="res://entities/trigger_multiple.tscn" id="12_lmfcu"]
[ext_resource type="Script" path="res://entities/trigger_multiple.gd" id="13_2lj1s"]
[ext_resource type="PackedScene" uid="uid://dikmguc0pj36a" path="res://entities/func_button.tscn" id="14_xlkwy"]
[ext_resource type="Script" path="res://entities/func_button.gd" id="15_uedyt"]

[node name="Example" type="Node3D"]

[node name="VMFNode" type="Node3D" parent="."]
script = ExtResource("1_lhojc")
vmf = "res://hammer_project/mapsrc/example2.vmf"

[node name="Geometry" type="MeshInstance3D" parent="VMFNode"]
mesh = ExtResource("2_6dllp")

[node name="Geometry_col" type="StaticBody3D" parent="VMFNode/Geometry"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="VMFNode/Geometry/Geometry_col"]
shape = ExtResource("3_xftf7")

[node name="Entities" type="Node3D" parent="VMFNode"]

[node name="info_player_start_10" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("4_coq5b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.6, 7.6294e-07, -2)
script = ExtResource("5_rebl7")
entity = {
"angles": Vector3(0, 0, 0),
"classname": "info_player_start",
"editor": {
"color": Vector3(0, 255, 0),
"logicalpos": "[0 2500]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 10,
"origin": Vector3(1.6, 7.6294e-07, -2),
"vmf": "res://hammer_project/mapsrc/example2.vmf"
}

[node name="light_12" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("4_ouwts")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.2, 0)
script = ExtResource("7_2d5ug")
defaultLightEnergy = 0.784314
entity = {
"_light": {
"a": 0.784314,
"b": 1.0,
"g": 1.0,
"r": 1.0
},
"_lightHDR": {
"a": 0.00392157,
"b": -0.00392157,
"g": -0.00392157,
"r": -0.00392157
},
"_lightscaleHDR": 1,
"_quadratic_attn": 1,
"classname": "light",
"editor": {
"color": Vector3(220, 30, 220),
"logicalpos": "[0 3000]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 12,
"origin": Vector3(0, 3.2, 0),
"vmf": "res://hammer_project/mapsrc/example2.vmf"
}

[node name="light_spot_44" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("8_tapr5")]
transform = Transform3D(-4.37114e-08, 0.5, -0.866025, 0, 0.866025, 0.5, 1, 2.18557e-08, -3.78552e-08, 0, 4.4, 4)
rotation_order = 3
script = ExtResource("9_uchp1")
defaultLightEnergy = 0.784314
entity = {
"_cone": 45,
"_exponent": 1,
"_inner_cone": 30,
"_light": {
"a": 0.784314,
"b": 0.0,
"g": 0.0,
"r": 1.0
},
"_lightHDR": {
"a": 0.00392157,
"b": -0.00392157,
"g": -0.00392157,
"r": -0.00392157
},
"_lightscaleHDR": 1,
"_quadratic_attn": 1,
"angles": Vector3(0, 0, -30),
"classname": "light_spot",
"editor": {
"color": Vector3(220, 30, 220),
"logicalpos": "[0 3000]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 44,
"origin": Vector3(0, 4.4, 4),
"pitch": -30,
"vmf": "res://hammer_project/mapsrc/example2.vmf"
}

[node name="door_1" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("10_tfddm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 3.2, 4)
script = ExtResource("11_77vlf")
move_direction = Vector3(-4.37114e-08, 0, -1)
move_distance = Vector3(-3.49691e-08, 0, -4.8)
lip_vector = Vector3(-1.09278e-08, 0, -0.25)
speed = 5.0
entity = {
"EFlags": 0,
"classname": "func_door",
"disablereceiveshadows": 0,
"disableshadows": 0,
"dmg": 0,
"editor": {
"color": Vector3(220, 30, 220),
"logicalpos": "[0 4500]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"forceclosed": 0,
"health": 0,
"id": 121,
"ignoredebris": 0,
"lip": 10,
"loopmovesound": 0,
"movedir": Vector3(0, 90, 0),
"noise1": "effects/button14.wav",
"origin": Vector3(4, 3.2, 4),
"radius": 100.0,
"renderamt": 255,
"rendercolor": Vector3(255, 255, 255),
"renderfx": 0,
"rendermode": 0,
"solid": {
"editor": {
"color": Vector3(220, 30, 220),
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 110,
"side": [{
"id": 132,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(144, -64, 256), Vector3(176, -64, 256), Vector3(176, -256, 256)]),
"value": Plane(0, 0, 1, 256),
"vecsum": Vector3(496, -384, 768)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(144, -64, 256), Vector3(176, -64, 256), Vector3(176, -256, 256), Vector3(144, -256, 256)]
}
}, {
"id": 131,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(144, -256, 0), Vector3(176, -256, 0), Vector3(176, -64, 0)]),
"value": Plane(0, 0, -1, 0),
"vecsum": Vector3(496, -576, 0)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(144, -256, 0), Vector3(176, -256, 0), Vector3(176, -64, 0), Vector3(144, -64, 0)]
}
}, {
"id": 130,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(144, -64, 256), Vector3(144, -256, 256), Vector3(144, -256, 0)]),
"value": Plane(-1, 0, 0, -144),
"vecsum": Vector3(432, -576, 512)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 128.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(144, -64, 256), Vector3(144, -256, 256), Vector3(144, -256, 0), Vector3(144, -64, 0)]
}
}, {
"id": 129,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(176, -64, 0), Vector3(176, -256, 0), Vector3(176, -256, 256)]),
"value": Plane(1, 0, 0, 176),
"vecsum": Vector3(528, -576, 256)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 128.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(176, -64, 0), Vector3(176, -256, 0), Vector3(176, -256, 256), Vector3(176, -64, 256)]
}
}, {
"id": 128,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(176, -64, 256), Vector3(144, -64, 256), Vector3(144, -64, 0)]),
"value": Plane(0, 1, 0, -64),
"vecsum": Vector3(464, -192, 512)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(176, -64, 256), Vector3(144, -64, 256), Vector3(144, -64, 0), Vector3(176, -64, 0)]
}
}, {
"id": 127,
"lightmapscale": 16,
"material": "DEV/TEXTURE_10",
"plane": {
"points": Array[Vector3]([Vector3(176, -256, 0), Vector3(144, -256, 0), Vector3(144, -256, 256)]),
"value": Plane(0, -1, 0, 256),
"vecsum": Vector3(464, -768, 256)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": -128.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(176, -256, 0), Vector3(144, -256, 0), Vector3(144, -256, 256), Vector3(176, -256, 256)]
}
}]
},
"spawnflags": 1024,
"spawnpos": 0,
"speed": 200,
"targetname": "door_1",
"viewhideflags": 0,
"vmf": "res://hammer_project/mapsrc/example2.vmf",
"wait": 4
}
flags = 1024

[node name="trigger_multiple_143" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("12_lmfcu")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.85, 3.2, 4)
script = ExtResource("13_2lj1s")
entity = {
"StartDisabled": 0,
"classname": "trigger_multiple",
"connections": {
"OnEndTouch": "door_1,Close,,0,-1",
"OnStartTouch": "door_1,Open,,0,-1"
},
"editor": {
"color": Vector3(220, 30, 220),
"logicalpos": "[0 5500]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 143,
"origin": Vector3(5.85, 3.2, 4),
"solid": {
"editor": {
"color": Vector3(220, 30, 220),
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 141,
"side": [{
"id": 144,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(148, 0, 256), Vector3(320, 0, 256), Vector3(320, -320, 256)]),
"value": Plane(0, 0, 1, 256),
"vecsum": Vector3(788, -320, 768)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(148, 0, 256), Vector3(320, 0, 256), Vector3(320, -320, 256), Vector3(148, -320, 256)]
}
}, {
"id": 143,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(148, -320, 0), Vector3(320, -320, 0), Vector3(320, 0, 0)]),
"value": Plane(0, 0, -1, 0),
"vecsum": Vector3(788, -640, 0)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(148, -320, 0), Vector3(320, -320, 0), Vector3(320, 0, 0), Vector3(148, 0, 0)]
}
}, {
"id": 142,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(148, 0, 256), Vector3(148, -320, 256), Vector3(148, -320, 0)]),
"value": Plane(-1, 0, 0, -148),
"vecsum": Vector3(444, -640, 512)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(148, 0, 256), Vector3(148, -320, 256), Vector3(148, -320, 0), Vector3(148, 0, 0)]
}
}, {
"id": 141,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(320, 0, 0), Vector3(320, -320, 0), Vector3(320, -320, 256)]),
"value": Plane(1, 0, 0, 320),
"vecsum": Vector3(960, -640, 256)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(320, 0, 0), Vector3(320, -320, 0), Vector3(320, -320, 256), Vector3(320, 0, 256)]
}
}, {
"id": 140,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(320, 0, 256), Vector3(148, 0, 256), Vector3(148, 0, 0)]),
"value": Plane(0, 1, 0, 0),
"vecsum": Vector3(616, 0, 512)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(320, 0, 256), Vector3(148, 0, 256), Vector3(148, 0, 0), Vector3(320, 0, 0)]
}
}, {
"id": 139,
"lightmapscale": 16,
"material": "TOOLS/TOOLSTRIGGER",
"plane": {
"points": Array[Vector3]([Vector3(320, -320, 0), Vector3(148, -320, 0), Vector3(148, -320, 256)]),
"value": Plane(0, -1, 0, 320),
"vecsum": Vector3(616, -960, 256)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.25,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(320, -320, 0), Vector3(148, -320, 0), Vector3(148, -320, 256), Vector3(320, -320, 256)]
}
}]
},
"spawnflags": 1,
"vmf": "res://hammer_project/mapsrc/example2.vmf",
"wait": 1
}
flags = 1

[node name="func_button_220" type="Node3D" parent="VMFNode/Entities" instance=ExtResource("14_xlkwy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.1, 1.4, 1.2)
script = ExtResource("15_uedyt")
move_direction = Vector3(1, 0, 0)
move_distance = Vector3(0.2, 0, 0)
speed = 0.125
entity = {
"EFlags": 0,
"classname": "func_button",
"connections": {
"OnPressed": "door_1,Toggle,,0,-1"
},
"disablereceiveshadows": 0,
"editor": {
"color": Vector3(220, 30, 220),
"logicalpos": "[0 500]",
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 220,
"lip": 0,
"locked_sentence": 0,
"locked_sound": 0,
"movedir": Vector3(0, 0, 0),
"origin": Vector3(3.1, 1.4, 1.2),
"radius": 100.0,
"renderamt": 255,
"rendercolor": Vector3(255, 255, 255),
"renderfx": 0,
"rendermode": 0,
"solid": {
"editor": {
"color": Vector3(220, 30, 220),
"visgroupautoshown": 1,
"visgroupshown": 1
},
"id": 191,
"side": [{
"id": 156,
"lightmapscale": 16,
"material": "DEV/TEXTURE_06",
"plane": {
"points": Array[Vector3]([Vector3(120, -32, 64), Vector3(128, -32, 64), Vector3(128, -64, 64)]),
"value": Plane(0, 0, 1, 64),
"vecsum": Vector3(376, -128, 192)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.0078125,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.03125,
"shift": 0.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(120, -32, 64), Vector3(128, -32, 64), Vector3(128, -64, 64), Vector3(120, -64, 64)]
}
}, {
"id": 155,
"lightmapscale": 16,
"material": "DEV/TEXTURE_06",
"plane": {
"points": Array[Vector3]([Vector3(120, -64, 48), Vector3(128, -64, 48), Vector3(128, -32, 48)]),
"value": Plane(0, 0, -1, -48),
"vecsum": Vector3(376, -160, 144)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.0078125,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.03125,
"shift": 0.0,
"x": 0.0,
"y": -1.0,
"z": 0.0
},
"vertices_plus": {
"v": [Vector3(120, -64, 48), Vector3(128, -64, 48), Vector3(128, -32, 48), Vector3(120, -32, 48)]
}
}, {
"id": 154,
"lightmapscale": 16,
"material": "DEV/TEXTURE_11",
"plane": {
"points": Array[Vector3]([Vector3(120, -32, 64), Vector3(120, -64, 64), Vector3(120, -64, 48)]),
"value": Plane(-1, 0, 0, -120),
"vecsum": Vector3(360, -160, 176)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.03125,
"shift": 0.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.015625,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(120, -32, 64), Vector3(120, -64, 64), Vector3(120, -64, 48), Vector3(120, -32, 48)]
}
}, {
"id": 153,
"lightmapscale": 16,
"material": "DEV/TEXTURE_06",
"plane": {
"points": Array[Vector3]([Vector3(128, -32, 48), Vector3(128, -64, 48), Vector3(128, -64, 64)]),
"value": Plane(1, 0, 0, 128),
"vecsum": Vector3(384, -160, 160)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.03125,
"shift": 0.0,
"x": 0.0,
"y": 1.0,
"z": 0.0
},
"vaxis": {
"scale": 0.015625,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(128, -32, 48), Vector3(128, -64, 48), Vector3(128, -64, 64), Vector3(128, -32, 64)]
}
}, {
"id": 152,
"lightmapscale": 16,
"material": "DEV/TEXTURE_06",
"plane": {
"points": Array[Vector3]([Vector3(128, -32, 64), Vector3(120, -32, 64), Vector3(120, -32, 48)]),
"value": Plane(0, 1, 0, -32),
"vecsum": Vector3(368, -96, 176)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.0078125,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.015625,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(128, -32, 64), Vector3(120, -32, 64), Vector3(120, -32, 48), Vector3(128, -32, 48)]
}
}, {
"id": 151,
"lightmapscale": 16,
"material": "DEV/TEXTURE_06",
"plane": {
"points": Array[Vector3]([Vector3(128, -64, 48), Vector3(120, -64, 48), Vector3(120, -64, 64)]),
"value": Plane(0, -1, 0, 64),
"vecsum": Vector3(368, -192, 160)
},
"rotation": 0,
"smoothing_groups": 0,
"uaxis": {
"scale": 0.0078125,
"shift": 0.0,
"x": 1.0,
"y": 0.0,
"z": 0.0
},
"vaxis": {
"scale": 0.015625,
"shift": 0.0,
"x": 0.0,
"y": 0.0,
"z": -1.0
},
"vertices_plus": {
"v": [Vector3(128, -64, 48), Vector3(120, -64, 48), Vector3(120, -64, 64), Vector3(128, -64, 64)]
}
}]
},
"sounds": 0,
"spawnflags": 1024,
"speed": 5,
"unlocked_sentence": 0,
"unlocked_sound": 0,
"viewhideflags": 0,
"vmf": "res://hammer_project/mapsrc/example2.vmf",
"wait": 3
}
flags = 1024
